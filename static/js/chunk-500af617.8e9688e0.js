/*!
 *  build: admin-pro 
 *  copyright: vue-admin-beautiful.com 1204505056@qq.com 
 *  time: 2022-6-2 18:19:03
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-500af617"],{5364:function(e,t,r){},"9ed6":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-container"},[r("el-form",{ref:"form",staticClass:"login-form",attrs:{"label-position":"left",model:e.form,rules:e.rules}},[r("h2",{staticClass:"platform-title"},[r("el-image",{staticClass:"logo",attrs:{fit:"contain",src:e.publicPath+"logo.png"}}),e._v(" "+e._s(e.translateTitle("Klickl合伙人中心"))+" ")],1),r("el-form-item",{attrs:{prop:"account"}},[r("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{placeholder:e.translateTitle("请输入用户名或邮箱"),tabindex:"1",type:"text"},scopedSlots:e._u([{key:"prefix",fn:function(){return[r("vab-icon",{attrs:{icon:"user-line"}})]},proxy:!0}]),model:{value:e.form.account,callback:function(t){e.$set(e.form,"account","string"===typeof t?t.trim():t)},expression:"form.account"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{key:e.passwordType,ref:"password",attrs:{placeholder:e.translateTitle("请输入密码"),tabindex:"2",type:e.passwordType},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},scopedSlots:e._u([{key:"prefix",fn:function(){return[r("vab-icon",{attrs:{icon:"lock-line"}})]},proxy:!0},"password"===e.passwordType?{key:"suffix",fn:function(){return[r("vab-icon",{staticClass:"show-password",attrs:{icon:"eye-off-line"},on:{click:e.handlePassword}})]},proxy:!0}:{key:"suffix",fn:function(){return[r("vab-icon",{staticClass:"show-password",attrs:{icon:"eye-line"},on:{click:e.handlePassword}})]},proxy:!0}],null,!0),model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}})],1),r("el-form-item",{attrs:{prop:"verifyCode"}},[r("el-input",{attrs:{placeholder:e.translateTitle("验证码")+e.previewText,tabindex:"3",type:"text"},scopedSlots:e._u([{key:"prefix",fn:function(){return[r("vab-icon",{attrs:{icon:"barcode-box-line"}})]},proxy:!0}]),model:{value:e.form.verifyCode,callback:function(t){e.$set(e.form,"verifyCode","string"===typeof t?t.trim():t)},expression:"form.verifyCode"}}),e.isSendVerificationCode?r("el-button",{staticClass:"code",attrs:{disabled:""}},[e._v(" "+e._s(e.sencondNumber)+" s ")]):r("el-button",{staticClass:"code",on:{click:e.getEmailCode}},[e._v(" "+e._s(e.translateTitle("获取验证码"))+" ")])],1),r("el-button",{staticClass:"login-btn",attrs:{loading:e.loading,type:"primary"},on:{click:e.handleLogin}},[e._v(" "+e._s(e.translateTitle("登录"))+" ")])],1)],1)},i=[],o=r("c7eb"),s=r("1da1"),a=r("5530"),c=(r("d9e2"),r("2f62")),l=r("61f7"),u=r("365c"),d=r("f121"),f={name:"Login",directives:{focus:{inserted:function(e){e.querySelector("input").focus()}}},beforeRouteLeave:function(e,t,r){clearInterval(this.timer),r()},data:function(){var e=function(e,t,r){""===t?r(new Error("用户名不能为空")):Object(l["isEmail"])(t)?r():r(new Error("账号不合法"))},t=function(e,t,r){Object(l["isPassword"])(t)?r():r(new Error("密码不能少于6位"))};return{publicPath:d["publicPath"],isSendVerificationCode:!1,sencondNumber:60,form:{account:"test@qq.com",password:"test@qq.com",verifyCode:"123456"},rules:{account:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:t}],verifyCode:[{required:!0,trigger:"blur",message:"验证码不能空"}]},loading:!1,passwordType:"password",redirect:void 0,timer:0,codeUrl:"https://www.oschina.net/action/user/captcha",previewText:""}},computed:{},watch:{$route:{handler:function(){this.redirect="/"},immediate:!0}},mounted:function(){},methods:Object(a["a"])(Object(a["a"])({},Object(c["b"])({login:"user/login"})),{},{initSencode:function(){this.sencondNumber=60,this.isSendVerificationCode=!1,clearInterval(this.timer)},getEmailCode:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){var r,n,i;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isSendVerificationCode){t.next=2;break}return t.abrupt("return");case 2:if(e.form.account){t.next=5;break}return e.$refs.form.validateField("account"),t.abrupt("return");case 5:if(Object(l["isEmail"])(e.form.account)){t.next=8;break}return e.$refs.form.validateField("account"),t.abrupt("return");case 8:return e.isSendVerificationCode=!0,e.loading=!0,t.prev=10,r={businessType:6,mail_to:e.form.account},t.next=14,Object(u["userSendEmailCode"])(r);case 14:n=t.sent,i=n.status,i?(e.timer=setInterval((function(){1===e.sencondNumber?e.initSencode():e.sencondNumber--}),1e3),e.$baseMessage("验证码发送成功","success",!1,"vab-hey-message-success")):e.initSencode(),t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](10),e.initSencode();case 22:return t.prev=22,e.loading=!1,t.finish(22);case 25:case"end":return t.stop()}}),t,null,[[10,19,22,25]])})))()},handlePassword:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleRoute:function(){return"/404"===this.redirect||"/403"===this.redirect?"/":this.redirect},handleLogin:function(){var e=this;this.$refs.form.validate(function(){var t=Object(s["a"])(Object(o["a"])().mark((function t(r){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=11;break}return t.prev=1,e.loading=!0,t.next=5,e.login(e.form).catch((function(){}));case 5:return e.initSencode(),t.next=8,e.$router.push(e.handleRoute());case 8:return t.prev=8,e.loading=!1,t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[1,,8,11]])})));return function(e){return t.apply(this,arguments)}}())},changeCode:function(){this.codeUrl="https://www.oschina.net/action/user/captcha?timestamp=".concat((new Date).getTime())}})},p=f,m=(r("f578"),r("2877")),b=Object(m["a"])(p,n,i,!1,null,"a82752ba",null);t["default"]=b.exports},f578:function(e,t,r){"use strict";r("5364")}}]);