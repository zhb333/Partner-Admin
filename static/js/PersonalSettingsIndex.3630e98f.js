/*!
 *  build: admin-pro 
 *  copyright: vue-admin-beautiful.com 1204505056@qq.com 
 *  time: 2022-6-2 18:19:03
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["PersonalSettingsIndex"],{"182f":function(e,t,a){"use strict";a("2425")},2425:function(e,t,a){},"66a6":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form-item",{attrs:{label:e.translateTitle("邮箱验证"),prop:"emailCode"}},[a("el-input",{attrs:{placeholder:e.translateTitle("请输入邮箱验证码")},model:{value:e.form.emailCode,callback:function(t){e.$set(e.form,"emailCode","string"===typeof t?t.trim():t)},expression:"form.emailCode"}},[e.isSendEmailVerificationCode?a("el-button",{attrs:{slot:"append",disabled:""},slot:"append"},[e._v(" "+e._s(e.emailSecondToText)+" ")]):a("el-button",{attrs:{slot:"append"},on:{click:e.handleGetEmailVerificationCode},slot:"append"},[e._v(" "+e._s(e.translateTitle("获取验证码"))+" ")])],1)],1),e.userInfo.isGoogleTFA||e.unCheck?a("el-form-item",{attrs:{label:e.translateTitle("谷歌验证码"),prop:"googlePIN"}},[a("el-input",{attrs:{placeholder:e.translateTitle("请输入谷歌验证码")},model:{value:e.form.googlePIN,callback:function(t){e.$set(e.form,"googlePIN",t)},expression:"form.googlePIN"}})],1):e._e()],1)},s=[],n=a("c7eb"),r=a("1da1"),l=a("5530"),o=(a("ac1f"),a("5319"),a("365c")),c=a("2f62"),u={name:"SafetyCertification",props:{unCheck:{type:Boolean,default:!1},form:{type:Object,default:function(){return{googlePIN:"",emailCode:""}}}},data:function(){return{isSendVerificationCode:!1,isSendEmailVerificationCode:!1,sencondNumber:60,emailSencondNumber:60}},computed:Object(l["a"])(Object(l["a"])({},Object(c["c"])({userInfo:"user/info"})),{},{secondToText:function(){var e=this,t=this.translateTitle("10001 秒后重新发送");return t.replace(/\d{5}/g,(function(){return e.sencondNumber}))},emailSecondToText:function(){var e=this,t=this.translateTitle("10001 秒后重新发送");return t.replace(/\d{5}/g,(function(){return e.emailSencondNumber}))}}),methods:{handleGetEmailVerificationCode:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isSendEmailVerificationCode){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e.isSendEmailVerificationCode=!0,e.loading=!0,a={businessType:e.form.businessType,mail_to:e.userInfo.email},t.next=8,Object(o["userSendEmailCode"])(a);case 8:e.emailTimer=setInterval((function(){1===e.emailSencondNumber?e.initemailCode():e.emailSencondNumber--}),1e3),e.$baseMessage("邮箱验证码发送成功","success",!1,"vab-hey-message-success"),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),e.initemailCode();case 15:return t.prev=15,e.loading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[2,12,15,18]])})))()},initSencode:function(){this.sencondNumber=60,this.isSendVerificationCode=!1,clearInterval(this.timer)},initemailCode:function(){this.emailSencondNumber=60,this.isSendEmailVerificationCode=!1,clearInterval(this.emailTimer)},init:function(){this.initemailCode(),this.initSencode()}}},d=u,f=a("2877"),m=Object(f["a"])(d,i,s,!1,null,null,null);t["default"]=m.exports},"80ef":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,title:e.translateTitle("修改密码"),visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-button",{on:{click:e.close}},[e._v(e._s(e.translateTitle("取消")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(" "+e._s(e.translateTitle("确定"))+" ")])]},proxy:!0}])},[a("el-form",{ref:"form",attrs:{"label-width":"100px",model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:e.translateTitle("旧密码"),prop:"oldPwd"}},[a("el-input",{attrs:{placeholder:e.translateTitle("请输入旧登录密码"),type:"password"},model:{value:e.form.oldPwd,callback:function(t){e.$set(e.form,"oldPwd","string"===typeof t?t.trim():t)},expression:"form.oldPwd"}})],1),a("el-form-item",{attrs:{label:e.translateTitle("新密码"),prop:"newPwd"}},[a("el-input",{attrs:{placeholder:e.translateTitle("请输入新登录密码"),type:"password"},model:{value:e.form.newPwd,callback:function(t){e.$set(e.form,"newPwd","string"===typeof t?t.trim():t)},expression:"form.newPwd"}})],1),a("SafetyCertification",{ref:"verify",attrs:{form:e.form}})],1)],1)},s=[],n=a("c7eb"),r=a("1da1"),l=a("5530"),o=(a("ac1f"),a("00b4"),a("d9e2"),a("365c")),c=(a("61f7"),a("66a6")),u=a("3620"),d=a("ed08"),f={oldPwd:"",newPwd:"",emailCode:"",googlePIN:"",businessType:4},m={name:"ChangePwd",components:{SafetyCertification:c["default"]},data:function(){var e=this,t=function(t,a,i){/^.*(?=.{6,})(?=.*\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*.? ]).*$/.test(a)?i():i(new Error(e.translateTitle("最少6位,包括大小写字母、数字和特殊字符")))};return{loading:!1,form:Object.assign({},f),rules:Object(l["a"])(Object(l["a"])({},d["formatSafeRules"].call(this,u["SafeRules"])),{},{oldPwd:[{required:!0,trigger:"blur",message:this.translateTitle("请输入新登录密码")}],newPwd:[{required:!0,trigger:"blur",message:this.translateTitle("请输入确认登录密码")},{trigger:"blur",validator:t}]}),title:"",dialogFormVisible:!1}},created:function(){},methods:{showEdit:function(){this.dialogFormVisible=!0},close:function(){this.$refs["form"].resetFields(),this.dialogFormVisible=!1,this.form=Object.assign({},f),this.$refs.verify.init()},save:function(){var e=this;this.$refs["form"].validate(function(){var t=Object(r["a"])(Object(n["a"])().mark((function t(a){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=10;break}return t.prev=1,t.next=4,Object(o["userModifyPassword"])(e.form);case 4:e.$baseMessage(e.translateTitle("修改成功"),"success","vab-hey-message-success"),e.$emit("fetch-data"),e.close();case 7:return t.prev=7,console.log("change-pwd"),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[1,,7,10]])})));return function(e){return t.apply(this,arguments)}}())}}},g=m,p=a("2877"),b=Object(p["a"])(g,i,s,!1,null,null,null);t["default"]=b.exports},"93c5":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"custom-table-container"},[a("h3",{staticClass:"guidance-title"},[e._v(e._s(e.translateTitle("安全设置")))]),a("ul",{staticClass:"security-list"},[a("li",{staticClass:"security-item"},[a("div",{staticClass:"item-left"},[a("div",{staticClass:"item-img"},[a("vab-icon",{staticClass:"item-img-icon",attrs:{icon:"money-cny-circle-line"}})],1),a("div",{staticClass:"item-theme"},[a("div",{staticClass:"theme-title"},[e._v(" "+e._s(e.translateTitle("账户密码"))+" ")]),a("div",{staticClass:"theme-desc"},[e._v(" "+e._s(e.translateTitle("用于账户登录时输入登录密码"))+" ")])])]),a("div",{staticClass:"item-right"},[a("div",[a("span",{staticClass:"theme-desc",staticStyle:{"margin-right":"15px"}},[e._v(" "+e._s(e.translateTitle("当前密码强度"))+" ： "),a("el-link",{attrs:{type:e._f("pwdStyle")(e.userInfo.passwordStrength)}},[e._v(" "+e._s(e.translateTitle(e.PasswordStrength[e.userInfo.passwordStrength]))+" ")])],1),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$refs.ChangePwd.showEdit()}}},[e._v(" "+e._s(e.translateTitle("修改"))+" ")])],1)])]),a("li",{staticClass:"security-item"},[a("div",{staticClass:"item-left"},[a("div",{staticClass:"item-img"},[a("vab-icon",{staticClass:"item-img-icon",attrs:{icon:"mail-send-fill"}})],1),a("div",{staticClass:"item-theme"},[a("div",{staticClass:"theme-title"},[e._v(e._s(e.translateTitle("邮箱验证")))]),a("div",{staticClass:"theme-desc"},[e._v(" "+e._s(e.translateTitle("用于登录、审核结算、修改安全设置时输入邮箱验证码"))+" ")])])]),a("div",[a("span",{staticClass:"theme-desc"},[e._v(e._s(e.userInfo.email))])])]),a("li",{staticClass:"security-item"},[a("div",{staticClass:"item-left"},[a("div",{staticClass:"item-img"},[a("vab-icon",{staticClass:"item-img-icon",attrs:{icon:"google-fill"}})],1),a("div",{staticClass:"item-theme"},[a("div",{staticClass:"theme-title"},[e._v(" "+e._s(e.translateTitle("谷歌验证"))+" ")]),a("div",{staticClass:"theme-desc"},[e._v(" "+e._s(e.translateTitle("用于登录、审核结算、修改安全设置时输入谷歌验证码"))+" ")])])]),a("div",{staticClass:"item-right"},[a("div",[e.userInfo.isGoogleTFA?a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$refs.BindGoogle.showEdit()}}},[e._v(" "+e._s(e.translateTitle("解绑"))+" ")]):a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$refs.BindGoogle.showEdit()}}},[e._v(" "+e._s(e.translateTitle("绑定"))+" ")])],1)])])]),a("h3",{staticClass:"guidance-title"},[e._v(e._s(e.translateTitle("登录历史")))]),a("p",{staticClass:"theme-desc",staticStyle:{"text-align":"right"}},[e._v(" "+e._s(e.translateTitle("最近十次记录"))+" ")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{align:"center",label:e.translateTitle("时间"),prop:"createTime"}}),a("el-table-column",{attrs:{align:"center",label:e.translateTitle("所在地"),prop:"content"}}),a("el-table-column",{attrs:{align:"center",label:e.translateTitle("IP地址"),prop:"ip"}})],1),a("ChangePwd",{ref:"ChangePwd",on:{"fetch-data":e.fetchData}}),a("BindGoogle",{ref:"BindGoogle",on:{"fetch-data":e.fetchData}})],1)},s=[],n=a("c7eb"),r=a("1da1"),l=a("5530"),o=a("80ef"),c=a("bee7"),u=a("2f62"),d=a("365c"),f=a("3620"),m={name:"PersonalSettings",components:{ChangePwd:o["default"],BindGoogle:c["default"]},filters:{pwdStyle:function(e){return["success","warning","danger"][e]}},data:function(){return{PasswordStrength:f["PasswordStrength"],tableData:[],loading:!1,listLoading:!1}},computed:Object(l["a"])({},Object(u["c"])({userInfo:"user/info"})),created:function(){this.fetchData(),this.fetchLog()},methods:Object(l["a"])(Object(l["a"])({},Object(u["b"])({getUserInfo:"user/getUserInfo"})),{},{fetchData:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.getUserInfo({isCacheOption:!1});case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()},fetchLog:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a,i;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.listLoading=!0,t.next=4,Object(d["BaseLog_GetList"])();case 4:a=t.sent,i=a.data,e.tableData=i.logs;case 7:return t.prev=7,e.listLoading=!1,t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[0,,7,10]])})))()}})},g=m,p=(a("182f"),a("2877")),b=Object(p["a"])(g,i,s,!1,null,"0724109b",null);t["default"]=b.exports},bee7:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"close-on-click-modal":!1,title:e.translateTitle(e.title),top:"30px",visible:e.dialogVisible,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.close},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-button",{on:{click:e.close}},[e._v(e._s(e.translateTitle("取消")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(" "+e._s(e.translateTitle("确定"))+" ")])]},proxy:!0}])},[a("div",{staticClass:"img-wrapper",staticStyle:{"text-align":"center"}},[a("el-image",{staticClass:"image",staticStyle:{width:"150px"},attrs:{fix:"contain",src:e.url}})],1),a("el-form",{ref:"form",attrs:{"label-width":"110px",model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:e.translateTitle("秘钥")}},[e._v(" "+e._s(e.key)+" "),a("vab-icon",{staticClass:"copy-icon",attrs:{icon:"file-copy-line",title:e.translateTitle("复制")},nativeOn:{click:function(t){return e.handleCopyText(e.key,t)}}})],1),a("SafetyCertification",{ref:"verify",attrs:{form:e.form,"un-check":""}})],1)],1)},s=[],n=a("c7eb"),r=a("1da1"),l=a("5530"),o=a("365c"),c=a("f71e"),u=a("2f62"),d=a("66a6"),f=a("3620"),m=a("ed08"),g={googlePIN:"",emailCode:"",businessType:7},p={name:"OpenPhone",components:{SafetyCertification:d["default"]},data:function(){return{loading:!1,form:Object.assign({},g),rules:Object(l["a"])({},m["formatSafeRules"].call(this,f["SafeRules"])),dialogVisible:!1,id:null,key:"",qRContent:"",url:""}},computed:Object(l["a"])(Object(l["a"])({},Object(u["c"])({userInfo:"user/info"})),{},{isGoogleTFA:function(){return this.userInfo.isGoogleTFA},title:function(){return this.isGoogleTFA?"解绑谷歌验证":"绑定谷歌验证"}}),methods:{handleCopyText:function(e,t){Object(c["default"])(e,t)},showEdit:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a,i,s,r,l;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialogVisible=!0,t.prev=1,e.loading=!0,t.next=5,Object(o["userGoogleTFAGetGoogleTFACode"])({userId:e.userInfo.userID});case 5:a=t.sent,i=a.data,i&&(s=i.key,r=i.url,l=i.qRContent,e.key=s,e.qRContent=l,e.url=r);case 8:return t.prev=8,e.loading=!1,t.finish(8);case 11:e.isGoogleTFA?e.form.businessType=8:e.form.businessType=7;case 12:case"end":return t.stop()}}),t,null,[[1,,8,11]])})))()},close:function(){this.$refs["form"].resetFields(),this.dialogVisible=!1,this.id=null,this.form=Object.assign({},g),this.$refs["verify"].init()},save:function(){var e=this;this.$refs["form"].validate(function(){var t=Object(r["a"])(Object(n["a"])().mark((function t(a){var i;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=24;break}if(t.prev=1,e.loading=!0,i={googlePIN:e.form.googlePIN,userId:e.userInfo.userID,emailCode:e.form.emailCode},!e.isGoogleTFA){t.next=9;break}return t.next=7,Object(o["userGoogleTFAUnBindGoogleTFA"])(i);case 7:t.next=11;break;case 9:return t.next=11,Object(o["userGoogleTFABindGoogleTFA"])(i);case 11:e.$baseMessage(e.translateTitle(e.isGoogleTFA?"解绑谷歌验证成功":"绑定谷歌验证成功"),"success",!1,"vab-hey-message-success"),e.$emit("fetch-data"),e.close(),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](1),console.log(t.t0);case 19:return t.prev=19,e.loading=!1,t.finish(19);case 22:t.next=25;break;case 24:return t.abrupt("return",!1);case 25:case"end":return t.stop()}}),t,null,[[1,16,19,22]])})));return function(e){return t.apply(this,arguments)}}())}}},b=p,h=a("2877"),v=Object(h["a"])(b,i,s,!1,null,null,null);t["default"]=v.exports},f71e:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return o}));var i=a("a026"),s=a("b311"),n=a.n(s);function r(){i["default"].prototype.$baseMessage("复制成功","success",!1,"vab-hey-message-success")}function l(){i["default"].prototype.$baseMessage("复制失败","error",!1,"vab-hey-message-success")}function o(e,t){var a=new n.a(t.target,{text:function(){return e}});a.on("success",(function(){r(e),a.destroy()})),a.on("error",(function(){l(e),a.destroy()})),a.onClick(t)}}}]);