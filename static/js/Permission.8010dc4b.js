/*!
 *  build: admin-pro 
 *  copyright: vue-admin-beautiful.com 1204505056@qq.com 
 *  time: 2022-6-2 18:19:03
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Permission"],{"1c3f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"close-on-click-modal":!1,title:e.translateTitle(e.title),top:"30px",visible:e.dialogFormVisible,width:"600px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-button",{on:{click:e.close}},[e._v(e._s(e.translateTitle("取消")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(" "+e._s(e.translateTitle("确定"))+" ")])]},proxy:!0}])},[a("el-form",{ref:"form",attrs:{"label-width":"110px",model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:e.translateTitle("菜单名"),prop:"title"}},[a("el-input",{attrs:{placeholder:e.translateTitle("请输入菜单名")},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title","string"===typeof t?t.trim():t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:e.translateTitle("上级菜单"),prop:"parentId"}},[a("el-select-tree",{attrs:{"check-strictly":"",clearable:"",data:e.PermissionSelectList,"default-expand-all":"",placeholder:e.translateTitle("上级菜单"),props:e.treeProps},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}})],1),a("el-form-item",{attrs:{label:e.translateTitle("类型"),prop:"type"}},[a("el-select",{attrs:{clearable:"",placeholder:e.translateTitle("类型")},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.PermissionTypes,(function(t,n){return a("el-option",{key:n,attrs:{label:e.translateTitle(t),value:n}})})),1)],1),a("el-form-item",{attrs:{label:e.translateTitle("路径"),prop:"path"}},[a("el-input",{attrs:{placeholder:e.translateTitle("请输入路径")},model:{value:e.form.path,callback:function(t){e.$set(e.form,"path",t)},expression:"form.path"}})],1),a("el-form-item",{attrs:{label:e.translateTitle("路由名称"),prop:"name"}},[a("el-input",{attrs:{placeholder:e.translateTitle("请输入路由名称")},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:e.translateTitle("图标"),prop:"icon"}},[a("el-input",{attrs:{placeholder:e.translateTitle("请输入REMIX ICON名称")},model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}}),a("div",[a("el-link",{attrs:{href:"https://remixicon.com",target:"_blank",type:"primary"}},[e._v(" "+e._s(e.translateTitle("REMIX ICON官网"))+" ")])],1)],1),a("el-form-item",{attrs:{label:e.translateTitle("排序"),prop:"sort"}},[a("el-input-number",{attrs:{placeholder:e.translateTitle("请输入排序")},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1)],1)],1)},r=[],i=a("c7eb"),s=a("1da1"),l=a("5530"),o=a("2f62"),c=a("365c"),u=a("3620"),p=a("8935"),d={name:"ActionEdit",components:{ElSelectTree:p["a"]},data:function(){return{treeProps:{value:"id",children:"children",label:"title"},PermissionTypes:u["PermissionTypes"],loading:!1,form:{name:"",title:"",path:"",icon:"",parentId:null,sort:0,type:""},rules:{title:[{required:!0,trigger:"blur",message:this.translateTitle("请输入菜单名")}],name:[{required:!0,trigger:"blur",message:this.translateTitle("请输入路由名称")}],path:[{required:!0,trigger:"blur",message:this.translateTitle("请输入路径")}]},dialogFormVisible:!1,id:null}},computed:Object(l["a"])(Object(l["a"])({},Object(o["c"])({PermissionSelectList:"options/PermissionSelectList"})),{},{title:function(){return this.id?"编辑":"新增"}}),created:function(){this.GetPermissionList({})},methods:Object(l["a"])(Object(l["a"])({},Object(o["b"])({GetPermissionList:"options/GetPermissionList"})),{},{show:function(e){var t=this;return Object(s["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e&&e.id&&(t.id=e.id,t.form=Object.assign({},t.form,e)),t.dialogFormVisible=!0;case 2:case"end":return a.stop()}}),a)})))()},close:function(){this.$refs["form"].resetFields(),this.dialogFormVisible=!1,this.id=null,this.form={name:"",title:"",path:"",icon:"",parentId:null,sort:0}},save:function(){var e=this;this.$refs["form"].validate(function(){var t=Object(s["a"])(Object(i["a"])().mark((function t(a){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=20;break}if(t.prev=1,e.loading=!0,!e.id){t.next=9;break}return e.form.websiteID=e.$parent.queryForm.websiteID,t.next=7,Object(c["UpdatePermission"])(e.form);case 7:t.next=12;break;case 9:return e.form.isEnable=!0,t.next=12,Object(c["CreatePermission"])(e.form);case 12:e.$baseMessage(e.translateTitle(e.id?"操作成功":"新增成功"),"success",!1,"vab-hey-message-success"),e.close(),e.$emit("fetch-data");case 15:return t.prev=15,e.loading=!1,t.finish(15);case 18:t.next=21;break;case 20:return t.abrupt("return",!1);case 21:case"end":return t.stop()}}),t,null,[[1,,15,18]])})));return function(e){return t.apply(this,arguments)}}())}})},f=d,m=a("2877"),h=Object(m["a"])(f,n,r,!1,null,null,null);t["default"]=h.exports},"3f32":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"custom-table-container"},[n("el-form",{attrs:{inline:""}},[n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.handleEdit}},[e._v(" "+e._s(e.translateTitle("新增"))+" ")])],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{border:"",data:e.PermissionTree,"expand-row-keys":e.expandRowKeys,"row-key":"id",size:"mini",stripe:"","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"expand-change":e.handleExpandChange},scopedSlots:e._u([{key:"empty",fn:function(){return[n("el-image",{staticClass:"vab-data-empty",attrs:{src:a("f1f0")}})]},proxy:!0}])},[n("el-table-column",{attrs:{align:"left",label:e.translateTitle("菜单名"),prop:"title","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{align:"center",label:e.translateTitle("序号"),"show-overflow-tooltip":"",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.$index;return[e._v(" "+e._s(a+1)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:e.translateTitle("图标"),prop:"icon","show-overflow-tooltip":"",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.icon?n("vab-icon",{staticStyle:{"font-size":"22px"},attrs:{icon:a.icon}}):"permission"===a.type?n("el-link",{attrs:{type:"warning"}},[n("vab-icon",{attrs:{icon:"error-warning-line"}})],1):"page"===a.type?n("el-link",{attrs:{type:"success"}},[n("vab-icon",{attrs:{icon:"page-separator"}})],1):e._e()]}}])}),n("el-table-column",{attrs:{align:"center",label:e.translateTitle("类型"),prop:"type","show-overflow-tooltip":"",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.translateTitle(e.PermissionTypes[a.type]))+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:e.translateTitle("排序"),prop:"sort","show-overflow-tooltip":"",width:"80"}}),n("el-table-column",{attrs:{align:"center",label:e.translateTitle("路径"),prop:"path","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{align:"center",label:e.translateTitle("路由名称"),prop:"name","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{align:"center",label:e.translateTitle("是否启用"),prop:"isEnable","show-overflow-tooltip":"",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("el-switch",{on:{change:function(t){return e.handleEnalbe(a)}},model:{value:a.isEnable,callback:function(t){e.$set(a,"isEnable",t)},expression:"row.isEnable"}})]}}])}),n("el-table-column",{attrs:{align:"center",label:e.translateTitle("操作"),"show-overflow-tooltip":"",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("div",[n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(a)}}},[e._v(" "+e._s(e.translateTitle("编辑"))+" ")]),n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDelete(a)}}},[e._v(" "+e._s(e.translateTitle("删除"))+" ")])],1)]}}])})],1),n("Edit",{ref:"edit",on:{"fetch-data":e.fetchData}})],1)},r=[],i=a("c7eb"),s=a("1da1"),l=a("5530"),o=(a("c740"),a("a434"),a("e9c4"),a("1c3f")),c=a("2f62"),u=a("365c"),p=a("3620"),d={name:"PermissionList",components:{Edit:o["default"]},data:function(){var e=localStorage.getItem("expandRowKeys"),t=e?JSON.parse(e):[];return{PermissionTypes:p["PermissionTypes"],listLoading:!1,queryForm:{},expandRowKeys:t}},computed:Object(l["a"])({},Object(c["c"])({PermissionTree:"options/PermissionTree"})),created:function(){this.GetPermissionList({})},methods:Object(l["a"])(Object(l["a"])({},Object(c["b"])({GetPermissionList:"options/GetPermissionList"})),{},{handleExpandChange:function(e,t){if(t)this.expandRowKeys.push(e.id);else{var a=this.expandRowKeys.findIndex((function(t){return t===e.id}));a>=0&&this.expandRowKeys.splice(a,1)}localStorage.setItem("expandRowKeys",JSON.stringify(this.expandRowKeys))},handleEnalbe:function(e){var t=this;return Object(s["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.listLoading=!0,a.next=4,Object(u["UpdatePermission"])(e);case 4:t.$baseMessage(t.translateTitle("操作成功"),"success",!1,"vab-hey-message-success"),t.fetchData();case 6:return a.prev=6,t.listLoading=!1,a.finish(6);case 9:case"end":return a.stop()}}),a,null,[[0,,6,9]])})))()},handleDelete:function(e){var t=this;this.$baseConfirm(this.translateTitle("是否删除当前数据"),null,Object(s["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.listLoading=!0,a.next=4,Object(u["DeletePermission"])({id:e.id,websiteID:t.queryForm.websiteID});case 4:t.$baseMessage(t.translateTitle("删除成功"),"success","vab-hey-message-success"),t.fetchData();case 6:return a.prev=6,t.listLoading=!1,a.finish(6);case 9:case"end":return a.stop()}}),a,null,[[0,,6,9]])}))))},handleEdit:function(e){this.$refs.edit.show(e)},fetchData:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,e.GetPermissionList();case 3:e.listLoading=!1;case 4:case"end":return t.stop()}}),t)})))()}})},f=d,m=a("2877"),h=Object(m["a"])(f,n,r,!1,null,"454b62da",null);t["default"]=h.exports},7052:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-container"},[a("keep-alive",{attrs:{include:"PermissionList"}},[a(e.actionName,{ref:"list",tag:"component",attrs:{row:e.row},on:{back:e.handleGoBack,change:e.handleChange,"fetch-data":e.handleFetchData}})],1)],1)},r=[],i=a("3f32"),s=a("8165"),l={name:"Permission",components:{List:i["default"]},mixins:[s["default"]]},o=l,c=a("2877"),u=Object(c["a"])(o,n,r,!1,null,null,null);t["default"]=u.exports},8165:function(e,t,a){"use strict";a.r(t),t["default"]={data:function(){return{actionName:"list",row:{}}},methods:{handleGoBack:function(){this.actionName="list"},handleChange:function(e){var t=e.row,a=e.actionName;this.row=t,this.actionName=a},handleFetchData:function(){var e=this;this.$nextTick((function(){e.$refs.list.fetchData()}))}}}},f1f0:function(e,t,a){e.exports=a.p+"static/img/data_empty.475a2a1e.png"}}]);